@use 'sass:math';

.b-button {
  background: #000;
  padding: 0;

  border: 0;
  cursor: pointer;
  position: relative; // anchor for ::before

  $bottomPadding: percentage(math.div($button-padding, $button2-height));
  $leftPadding: percentage(math.div($button-padding, $button2-width));

  > .title {
    width: percentage(math.div($button-width, $button2-width));
    height: percentage(math.div($button-height, $button2-height));
    // width: percentage(math.div($button-width, $button2-width));
    // height: percentage(math.div($button-height, $button2-height));
    display: block;
    bottom: $bottomPadding;
    left: $leftPadding;
    pointer-events: none;
    position: absolute;
    text-indent: -99999px;

    clip-path: polygon(
      100% 0%,
      100% percentage(1 - math.div($button-height - $button-inner-height, $button2-height)),
      percentage(1 - math.div($button-width - $button-inner-width, $button2-width)) 100%,
      0 100%,
      0 percentage(math.div($button-height - $button-inner-height, $button2-height)),
      percentage(math.div($button-width - $button-inner-width, $button2-width)) 0
    );

      &::before {
      background: linear-gradient(135deg, #00c191 0%,#00c191 50%, #336 50%, #336 100%);
      display: block;
      content: '';
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      position: absolute;
      padding-bottom: 100%;
    }

      &::after {
        box-shadow: 0 0 0 rem(1px) #000 inset;
        background: #ffff00;
        display: block;
        content: '';
        bottom: percentage(math.div($button-height - $button-inner-height, $button-height));
        left: percentage(math.div($button-width - $button-inner-width, $button-width));
        // width: 100%;
        // height: 100%;
        width: percentage(math.div($button-inner-width, $button-width));
        height: percentage(math.div($button-inner-height, $button-height));
        position: absolute;
    }
  }

  &:focus {
    outline: none;
  }

  &:hover {
    > .title {
      clip-path: polygon(
        percentage(1 - math.div(math.div($button-width - $button-inner-width, 2), $button2-width)) percentage(math.div(math.div($button-height - $button-inner-height, 2), $button2-height)),
        percentage(1 - math.div(math.div($button-width - $button-inner-width, 2), $button2-width)) percentage(1 - math.div(math.div($button-height - $button-inner-height, 2), $button2-height)),
        percentage(1 - math.div($button-width - $button-inner-width, $button2-width)) 100%,
        0 100%,
        0 percentage(math.div($button-height - $button-inner-height, $button2-height)),
        percentage(math.div(math.div($button-width - $button-inner-width, 2), $button2-width)) percentage(math.div(math.div($button-height - $button-inner-height, 2), $button2-height))
      );

      &::after {
        bottom: percentage(math.div(math.div($button-height - $button-inner-height, 2), $button2-height));
        left: percentage(math.div(math.div($button-width - $button-inner-width, 2), $button2-width));
      }
    }
  }

  &:active,
  &:active:hover {
    > .title {
      clip-path: none;

      &::before {
        display: none;
        content: none;
      }

      &::after {
        bottom: 0;
        left: 0;
        width: percentage(math.div($button-inner-width, $button-width));
        height: percentage(math.div($button-inner-height, $button-height));
      }
    }
  }
}
